import{j as e,r as f,b as oe,a as de,u as xe}from"./index-D0dnNxI7.js";import{u as me}from"./useMutation-c0hQv--K.js";import{A as fe,c as ue}from"./AdminApi-BnHrq_k2.js";import{u as Y}from"./useWindowWidth-BhHhQXLI.js";import{S as he}from"./arrow_back-DLEDK4Gi.js";import{r as be}from"./refresh-CZIaawOm.js";import{a as pe,u as je}from"./useNewOrderToastStore-BfSWSMcC.js";import"./useQuery-CCwnVFBg.js";const V=()=>me({mutationFn:async({orderId:r,status:i})=>(await fe.patch(`/admin/orders/status/${r}`,{orderStatus:i})).data}),ve=["#576376","#CEB4F0","#A5B8D6","#84A6AD","#788FB6","#99a3b4","#6C707A","#898BBC","#95C8BC","#B4B4B4","#3C485C","#A27FCF","#849CC3","#5F8992","#5472A3","#6B7C99","#4B4F59","#6B6D9B","#6FA99B","#929292","#3C485C","#875FBB","#6484B7","#4C6E75","#3F5A86","#52637F","#3E4045","#4C4E75","#507F74","#767676"],B=r=>r<1||r>30?"#6C707A":ve[r-1],ge=`
  @keyframes dropDown {
    0%, 20% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-6px);
    }
    60%, 100% {
      transform: translateY(0);
    }
  }
`,M=({dotColor:r="bg-white",dotSize:i="w-1 h-1",spacing:a="space-x-1",duration:n="1.4s",className:c=""})=>e.jsxs(e.Fragment,{children:[e.jsx("style",{children:ge}),e.jsx("div",{className:`flex items-center justify-center ${c}`,children:e.jsxs("div",{className:`flex ${a}`,children:[e.jsx("div",{className:`${i} ${r} rounded-full`,style:{animation:`dropDown ${n} infinite`,animationDelay:"0s"}}),e.jsx("div",{className:`${i} ${r} rounded-full`,style:{animation:`dropDown ${n} infinite`,animationDelay:"0.2s"}}),e.jsx("div",{className:`${i} ${r} rounded-full`,style:{animation:`dropDown ${n} infinite`,animationDelay:"0.4s"}})]})})]}),X=({orderId:r,tableNumber:i,depositorName:a,totalAmount:n,timeText:c,onClose:l,onSuccess:o})=>{const s=V(),d=async()=>{try{await s.mutateAsync({orderId:r,status:"COOKING"}),o==null||o(),l()}catch(u){console.error("주문 상태 업데이트 실패:",u)}};return e.jsxs("div",{className:"flex flex-col justify-center items-center bg-white rounded-[20px] max-w-sm w-full px-5.5 pt-7.5 pb-5.5",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-col text-center justify-center items-center gap-2.5",children:[e.jsx("div",{className:"flex text-title-20-bold text-black-85",children:"입금 확인 하셨나요?"}),e.jsxs("div",{className:"flex flex-col justify-center items-center text-14-regular text-black-60",children:[e.jsx("div",{className:"flex",children:"입금이 되었는지 다시 한번 확인해주세요."}),e.jsx("div",{className:"flex",children:"입금 확인 후에는 주문 상태가 조리중으로 변경돼요."})]})]}),e.jsxs("div",{className:"flex flex-row mt-7.5 bg-black-15 rounded-[14px] px-3.5 py-3.5 w-70 gap-2.5 max-[450px]:w-60",children:[e.jsx("div",{className:"flex rounded-full w-9 h-9 items-center justify-center text-title-18-semibold text-white-100",style:{backgroundColor:B(i)},children:i}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex text-14-medium text-black-60 items-center",children:c}),e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("div",{className:"flex text-16-semibold text-black-80",children:a}),e.jsx("div",{className:"flex w-[1.5px] bg-[#D5D5D5] h-3.5"}),e.jsxs("div",{className:"flex text-16-semibold text-black-80",children:[n.toLocaleString(),"원"]})]})]})]}),e.jsxs("div",{className:"flex flex-row w-full mt-7.5 gap-2",children:[e.jsx("div",{className:"flex flex-1 bg-black-20 rounded-[10px] px-3 py-2.5 items-center justify-center text-16-semibold text-black-65 cursor-pointer",onClick:l,children:"취소"}),e.jsx("div",{className:`flex flex-1 bg-cool-black rounded-[10px] px-3 py-2.5 items-center justify-center text-16-semibold text-white cursor-pointer ${s.isPending?"opacity-50 cursor-not-allowed":""}`,onClick:s.isPending?void 0:d,children:s.isPending?e.jsx(M,{}):"확인"})]})]})},Z=({orderId:r,title:i,description:a,targetStatus:n,onClose:c,onSuccess:l})=>{const o=V(),s=async()=>{try{await o.mutateAsync({orderId:r,status:n}),l==null||l(),c()}catch(d){console.error("주문 상태 업데이트 실패:",d)}};return e.jsxs("div",{className:"flex flex-col justify-center items-center bg-white rounded-[20px] max-w-sm w-full px-5.5 pt-7.5 pb-5.5",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-col text-center justify-center items-center gap-2.5",children:[e.jsx("div",{className:"flex text-title-20-bold text-black-85",children:i}),e.jsx("div",{className:"flex flex-col justify-center items-center text-14-regular text-black-60",children:e.jsx("div",{className:"flex",children:a})})]}),e.jsxs("div",{className:"flex flex-row w-full mt-5 gap-2",children:[e.jsx("div",{className:"flex flex-1 bg-black-20 rounded-[10px] px-3 py-2.5 items-center justify-center text-16-semibold text-black-65 cursor-pointer",onClick:c,children:"취소"}),e.jsx("div",{className:`flex flex-1 bg-cool-black rounded-[10px] px-3 py-2.5 items-center justify-center text-16-semibold text-white cursor-pointer ${o.isPending?"opacity-50 cursor-not-allowed":""}`,onClick:o.isPending?void 0:s,children:o.isPending?e.jsx(M,{}):"확인"})]})]})},ee=({orderId:r,onClose:i,onSuccess:a})=>e.jsx(Z,{orderId:r,title:"주문을 복구할까요?",description:"주문 상태가 조리 중으로 변경됩니다.",targetStatus:"COOKING",onClose:i,onSuccess:a}),te=({orderId:r,onClose:i,onSuccess:a})=>e.jsx(Z,{orderId:r,title:"조리가 완료되었나요?",description:"주문 상태가 주문 완료로 변경됩니다.",targetStatus:"COOKED",onClose:i,onSuccess:a}),Ne=({orderId:r,onClose:i,onSuccess:a})=>{const n=[{id:"SOLD_OUT",label:"메뉴 품절"},{id:"SIMPLE_CANCEL",label:"단순 취소"},{id:"ETC",label:"기타"}],c=async l=>{try{await ue(r,l),a==null||a(),i()}catch(o){console.error("주문 취소 실패:",o)}};return e.jsxs("div",{className:"flex flex-col justify-center items-center bg-white rounded-[20px] max-w-sm w-full p-5.5 px-5.5 gap-5",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-col text-center justify-center items-center gap-2.5",children:[e.jsx("div",{className:"flex text-title-20-bold text-black-90",children:"주문 취소 사유를 선택해주세요"}),e.jsx("div",{className:"flex text-14-regular text-black-60",children:"선택 즉시 주문이 취소됩니다."})]}),e.jsx("div",{className:"flex flex-col w-full gap-2",children:n.map(l=>e.jsx("div",{className:"flex w-full bg-black-20 rounded-[10px] px-4 py-[13px] items-center justify-center text-16-semibold text-black-70 cursor-pointer",onClick:()=>c(l.id),children:l.label},l.id))})]})},J=({orderId:r,tableNumber:i,timeText:a,depositorName:n,totalAmount:c,onClick:l,onSuccess:o})=>{const[s,d]=f.useState(!1),u=y=>{y.stopPropagation(),d(!0)},p=()=>{d(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row justify-between items-center w-full cursor-pointer",onClick:l,children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("div",{className:"flex rounded-full w-9 h-9 items-center justify-center text-title-18-semibold text-white-100",style:{backgroundColor:B(i)},children:i}),e.jsxs("div",{className:"flex flex-col ml-2.5",children:[e.jsx("div",{className:"flex text-14-medium text-black-60",children:a}),e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("div",{className:"flex text-16-semibold text-black-80",children:n}),e.jsx("div",{className:"flex w-[1.5px] bg-[#D5D5D5] h-3.5"}),e.jsxs("div",{className:"flex text-16-semibold text-black-80",children:[c.toLocaleString(),"원"]})]})]})]}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"flex px-2.5 py-1.25 bg-black-20 rounded-lg text-14-semibold text-black-70 cursor-pointer hover:bg-black-30",onClick:u,children:"입금 확인"})})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 max-[450px]:px-8.75",onClick:p,children:e.jsx(X,{orderId:r,tableNumber:i,depositorName:n,totalAmount:c,timeText:a,onClose:p,onSuccess:o})})]})},Q=({orderId:r,tableNumber:i,menuDetails:a,onSuccess:n,onClick:c})=>{const[l,o]=f.useState(!1),s=Y(),d=a?Object.entries(a):[],u=d.length===1,p=()=>s>=1024?10:(s>=768,7),y=b=>{b.stopPropagation(),o(!0)},h=()=>{o(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex flex-row justify-between cursor-pointer ${u?"items-center":""}`,onClick:c,children:[e.jsxs("div",{className:"flex flex-row gap-2.5",children:[e.jsx("div",{className:"flex w-9 h-9 items-center justify-center rounded-full text-title-18-semibold text-white-100",style:{backgroundColor:B(i)},children:i}),e.jsx("div",{className:`flex flex-col gap-2.5 text-16-semibold text-black-80 ${u?"justify-center":""}`,children:d.map(([b,C],x)=>e.jsxs("div",{className:"flex flex-row gap-2.5 justify-between",children:[e.jsx("div",{className:"flex w-40 md:w-33.5 lg:w-40 max-[376px]:w-33.5 truncate",children:b.length>p()?b.substring(0,p())+"...":b}),e.jsx("div",{className:"flex",children:C.quantity})]},x))})]}),e.jsx("div",{className:`flex rounded-lg lg bg-black-20 px-2.5 py-1.25 items-center justify-center text-14-semibold text-black-70 cursor-pointer hover:bg-black-30 ${u?"":"self-start"}`,onClick:y,children:"조리 완료"})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 max-[450px]:px-8.75",onClick:h,children:e.jsx(te,{orderId:r,onClose:h,onSuccess:n})})]})},le=({orderId:r,tableNumber:i,depositorName:a,menuDetails:n,totalAmount:c,createdAt:l,onSuccess:o,onClick:s})=>{var N;const[d,u]=f.useState(!1),y=Y()<=450,h=n?Object.entries(n):[],b=((N=h[0])==null?void 0:N[0])||"",C=h.length-1,x=h.length>1?`${b} 외 ${C}개`:b,D=()=>{u(!0)},E=()=>{u(!1)};return e.jsxs(e.Fragment,{children:[y?e.jsxs("div",{className:"flex flex-row gap-5 px-5.5 py-3.5 justify-between border-b border-black-25 items-center text-16-regular leading-[136%] tracking-[-0.02em] text-black-70 cursor-pointer",onClick:s,children:[e.jsxs("div",{className:"flex flex-row gap-2.5",children:[e.jsxs("div",{className:"flex w-8.5",children:[i,"번"]}),e.jsxs("div",{className:"flex max-[376px]:w-20 w-30",children:[c.toLocaleString(),"원"]}),e.jsx("div",{className:"flex",children:l})]}),e.jsx("div",{className:"flex rounded-lg border border-black-30 px-2.5 py-1.25 text-14-semibold text-black-70 flex-shrink-0 cursor-pointer hover:bg-black-10",onClick:m=>{m.stopPropagation(),D()},children:"주문 복구"})]}):e.jsxs("div",{className:"flex flex-row gap-2.5 px-5 py-4 border-b border-black-20 items-center cursor-pointer",onClick:s,children:[e.jsxs("div",{className:"flex flex-[0.7] text-16-regular text-black-70",children:[i,"번"]}),e.jsx("div",{className:"flex flex-[1] text-16-regular text-black-70",children:a}),e.jsx("div",{className:"flex flex-[2.5] text-16-regular text-black-70 truncate overflow-hidden whitespace-nowrap",children:x}),e.jsxs("div",{className:"flex flex-[1.5] text-16-regular text-black-70",children:[c.toLocaleString(),"원"]}),e.jsx("div",{className:"flex flex-[1.5] text-16-regular text-black-70",children:l}),e.jsx("div",{className:"flex-1 flex justify-end",children:e.jsx("div",{className:"rounded-lg border border-black-30 px-2.5 py-1.25 text-14-semibold text-black-70 flex-shrink-0 cursor-pointer hover:bg-black-10",onClick:m=>{m.stopPropagation(),D()},children:"주문 복구"})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 max-[450px]:px-8.75",onClick:E,children:e.jsx(ee,{orderId:r,onClose:E,onSuccess:o})})]})},O=({type:r,orderId:i,tableNumber:a,timeText:n,depositorName:c,totalAmount:l,menuDetails:o,onClose:s,onSuccess:d})=>{const[u,p]=f.useState(!1),[y,h]=f.useState(!1),b=o?Object.entries(o):[],C=()=>{p(!0)},x=()=>{h(!0)},D=()=>{p(!1)},E=()=>{h(!1)},N=()=>{p(!1),d==null||d(),s()},m=()=>{h(!1),d==null||d(),s()},v=r==="payment"?{title:"입금 내역",depositorLabel:"입금자",amountLabel:"입금 금액",actionText:"입금 확인",modalComponent:X,buttonStyle:"flex px-2.5 py-1.25 bg-black-20 items-center justify-center rounded-lg w-full h-12 text-14-semibold text-black-70 cursor-pointer"}:r==="cooking"?{title:"조리 중 주문",depositorLabel:"주문자",amountLabel:"주문 금액",actionText:"조리 완료",modalComponent:te,buttonStyle:"flex px-2.5 py-1.25 bg-black-20 items-center justify-center rounded-lg w-full h-12 text-14-semibold text-black-70 cursor-pointer"}:{title:"주문 내역",depositorLabel:"주문자",amountLabel:"주문 금액",actionText:"주문 복구",modalComponent:ee,buttonStyle:"flex px-2.5 py-1.25 bg-white border border-black-30 items-center justify-center rounded-lg w-full h-12 text-14-semibold text-black-70 cursor-pointer"},A=v.modalComponent;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute inset-0 bg-white z-50 flex flex-col px-5.5 py-4 justify-between overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-row cursor-pointer",onClick:s,children:[e.jsx(he,{className:"flex icon-s text-black-50"}),e.jsx("div",{className:"flex text-16-semibold text-black-50",children:"이전으로"})]}),e.jsxs("div",{className:"flex flex-row mt-6 gap-2.5",children:[e.jsx("div",{className:"flex rounded-full w-9 h-9 items-center justify-center text-title-18-semibold text-white-100",style:{backgroundColor:B(a)},children:a}),e.jsxs("div",{className:"flex text-title-18-semibold text-black-90 items-center",children:[a,"번 테이블"]})]}),e.jsx("div",{className:"flex mt-6 text-title-18-semibold text-black-90",children:v.title}),e.jsxs("div",{className:"flex flex-col mt-4 gap-2.5",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("div",{className:"flex text-16-medium text-black-60",children:v.depositorLabel}),e.jsx("div",{className:"flex text-16-semibold text-black-80",children:c})]}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("div",{className:"flex text-16-medium text-black-60",children:v.amountLabel}),e.jsxs("div",{className:"flex text-16-semibold text-black-80",children:[l.toLocaleString(),"원"]})]}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("div",{className:"flex text-16-medium text-black-60",children:"주문 시간"}),e.jsx("div",{className:"flex text-16-semibold text-black-80",children:n})]})]}),e.jsx("div",{className:"flex mt-6 mb-6 border-t border-black-25"}),e.jsxs("div",{className:"flex text-title-18-semibold text-black-90",children:["주문 메뉴 ",b.length]}),e.jsx("div",{className:"flex flex-col mt-4 gap-2.5 text-16-semibold text-black-80",children:b.map(([P,w],j)=>e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("div",{className:"flex flex-[0.6]",children:P}),e.jsxs("div",{className:"flex flex-[0.4] justify-between",children:[e.jsx("div",{className:"flex",children:w.quantity}),e.jsxs("div",{className:"flex",children:[(w.quantity*w.price).toLocaleString(),"원"]})]})]},j))})]}),r==="payment"?e.jsxs("div",{className:"flex flex-row gap-1.5",children:[e.jsx("div",{className:"flex px-2.5 py-1.25 bg-[#FFF0EB] items-center justify-center rounded-lg flex-1 h-12 text-14-semibold text-[#FF6736] cursor-pointer",onClick:x,children:"주문 취소"}),e.jsx("div",{className:"flex px-2.5 py-1.25 bg-black-20 items-center justify-center rounded-lg flex-1 h-12 text-14-semibold text-black-70 cursor-pointer",onClick:C,children:v.actionText})]}):e.jsx("div",{className:v.buttonStyle,onClick:C,children:v.actionText})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",onClick:D,children:e.jsx(A,{orderId:i,tableNumber:a,depositorName:c,totalAmount:l,timeText:n,onClose:D,onSuccess:N})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 max-[450px]:px-5",onClick:E,children:e.jsx(Ne,{orderId:i,onClose:E,onSuccess:m})})]})},we=({cookedOrders:r,isLoading:i,error:a,onRefresh:n,scrollContainerRef:c,savedScrollPosition:l,setSavedScrollPosition:o})=>{const[s,d]=f.useState(null),[u,p]=f.useState(0),y=f.useRef(null),h=c||y,b=l??u,C=o||p,x=m=>{const S=new Date(m),v=S.getHours().toString().padStart(2,"0"),A=S.getMinutes().toString().padStart(2,"0");return`${v}:${A}`},D=m=>{const S=new Date(m),v=S.getFullYear(),A=S.getMonth()+1,P=S.getDate(),w=S.getHours().toString().padStart(2,"0"),j=S.getMinutes().toString().padStart(2,"0");return`${v}년 ${A}월 ${P}일 ${w}:${j}`},E=m=>{h.current&&(C(h.current.scrollTop),h.current.scrollTop=0),d(m)},N=()=>{d(null),setTimeout(()=>{h.current&&(h.current.scrollTop=b)},0)};return e.jsx("div",{className:"flex flex-row w-full gap-2.5 flex-1 min-h-0 overflow-hidden",children:e.jsxs("div",{className:"flex flex-1 flex-col min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-row ml-1.5 gap-1.5 flex-shrink-0 mb-3",children:[e.jsx("div",{className:"text-title-20-bold text-[#363D4A]",children:"조리 완료"}),e.jsx("div",{className:"text-title-20-bold text-[#363D4A]",children:r.length})]}),e.jsxs("div",{className:"flex flex-col rounded-2xl border border-black-30 flex-1 bg-white min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-row gap-2.5 px-5 py-2.5 bg-[#E8EDF1] rounded-t-2xl items-center flex-shrink-0",children:[e.jsx("div",{className:"flex flex-[0.7] text-14-medium text-navy-35",children:"테이블"}),e.jsx("div",{className:"flex flex-[1] text-14-medium text-navy-35",children:"입금자"}),e.jsx("div",{className:"flex flex-[2.5] text-14-medium text-navy-35",children:"메뉴"}),e.jsx("div",{className:"flex flex-[1.5] text-14-medium text-navy-35",children:"금액"}),e.jsx("div",{className:"flex flex-[1.5] text-14-medium text-navy-35",children:"주문 시간"}),e.jsx("div",{className:"flex-1"})]}),e.jsxs("div",{ref:h,className:`flex-1 min-h-0 relative ${s?"overflow-hidden":"overflow-y-auto"}`,children:[i?e.jsx("div",{className:"flex flex-col items-center justify-center h-full py-20 text-center",children:e.jsx(M,{})}):r.length>0?r.map(m=>e.jsx(le,{orderId:m.id,tableNumber:m.tableId,depositorName:m.depositorName,menuDetails:m.menuDetails,totalAmount:m.totalPrice||0,createdAt:x(m.createdAt),onSuccess:n,onClick:()=>E(m)},m.id)):e.jsx("div",{className:"flex flex-col items-center justify-center h-full py-20 text-center",children:e.jsx("div",{className:"text-16-medium text-black-60",children:a?"데이터를 불러오지 못했습니다.":"조리 완료된 주문이 없어요!"})}),s&&e.jsx(O,{type:"cooked",orderId:s.id,tableNumber:s.tableId,timeText:D(s.createdAt),depositorName:s.depositorName,totalAmount:s.totalPrice||0,menuDetails:s.menuDetails,onClose:N,onSuccess:n})]})]})]})})},$e=()=>{const{storeId:r}=oe(),[i,a]=f.useState("전체"),[n,c]=f.useState("입금 대기"),[l,o]=f.useState(null),[s,d]=f.useState(null),[u,p]=f.useState(0),[y,h]=f.useState(0),[b,C]=f.useState(!1),x=f.useRef(null),D=f.useRef(null),N=Y()<=450,m=Number(r),{search:S}=de(),v=new URLSearchParams(S),A=xe(),P=v.get("order"),w=v.get("status"),{data:j=[],isLoading:F,error:I,refetch:k}=pe(m),q=je(t=>t.purgeNonWaiting),W=t=>{const g=new Date(t),K=g.getHours().toString().padStart(2,"0"),G=g.getMinutes().toString().padStart(2,"0");return`${K}:${G}`},L=t=>{const g=new Date(t),K=g.getFullYear(),G=g.getMonth()+1,ae=g.getDate(),ne=g.getHours().toString().padStart(2,"0"),ce=g.getMinutes().toString().padStart(2,"0");return`${K}년 ${G}월 ${ae}일 ${ne}:${ce}`},$=j.filter(t=>t.status==="WAITING_FOR_PAYMENT"),T=j.filter(t=>t.status==="COOKING"),R=j.filter(t=>t.status==="COOKED"),se=()=>{if(!b){C(!0);try{k()}finally{setTimeout(()=>C(!1),300)}}},z=t=>{x.current&&(p(x.current.scrollTop),x.current.scrollTop=0),o(t)},_=()=>{o(null),setTimeout(()=>{x.current&&(x.current.scrollTop=u)},0);const t=new URLSearchParams(location.search);t.delete("order"),A({search:t.toString()},{replace:!0})},U=()=>{d(null),setTimeout(()=>{x.current&&(x.current.scrollTop=u)},0)},ie=t=>{x.current&&(p(x.current.scrollTop),x.current.scrollTop=0),o(t)},H=t=>{x.current&&(p(x.current.scrollTop),x.current.scrollTop=0),d(t)},re=t=>{x.current&&(p(x.current.scrollTop),x.current.scrollTop=0),o(t);const g=new URLSearchParams(location.search);g.set("order",String(t.id)),g.set("status",t.status),A({search:g.toString()},{replace:!0})};return f.useEffect(()=>{w&&(a(w==="COOKED"?"조리 완료":"전체"),w==="WAITING_FOR_PAYMENT"?c("입금 대기"):w==="COOKING"?c("조리 중"):w==="COOKED"&&c("조리 완료"))},[w]),f.useEffect(()=>{if(!(j!=null&&j.length)||!P)return;const t=j.find(g=>String(g.id)===P);t&&re(t)},[j,P]),f.useEffect(()=>{P||(o(null),d(null))},[i,n,P]),f.useEffect(()=>{j!=null&&j.length&&q(j)},[j,q]),e.jsxs("div",{className:"w-full flex flex-col items-center mx-auto overflow-hidden",style:{height:"calc(100vh - 2.5rem)"},children:[e.jsxs("div",{className:`flex flex-row relative w-full justify-between items-center flex-shrink-0 ${N?"mb-5":"mb-7.5"}`,children:[!N&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:`rounded-full px-4 py-2 cursor-pointer ${i==="전체"?"bg-cool-black text-14-semibold text-white":"border-[#E7E7E7] border bg-white text-14-semibold text-black-60"}`,onClick:()=>a("전체"),children:["진행 중 ",$.length+T.length]}),e.jsxs("div",{className:`rounded-full px-4 py-2 cursor-pointer ${i==="조리 완료"?"bg-cool-black text-14-semibold text-white":"border-[#E7E7E7] border bg-white text-14-semibold text-black-60"}`,onClick:()=>a("조리 완료"),children:["조리 완료 ",R.length]})]}),N&&e.jsxs("div",{className:"flex items-start gap-1 w-full",children:[e.jsxs("div",{className:`rounded-full px-3.5 py-1.75 cursor-pointer ${n==="입금 대기"?"bg-navy-80 text-14-semibold tracking-[0em] text-white":"border-[#ECECEC] border bg-white text-14-semibold tracking-[0em] text-navy-30"}`,onClick:()=>c("입금 대기"),children:["입금 대기 ",$.length]}),e.jsxs("div",{className:`rounded-full px-3.5 py-1.75 cursor-pointer ${n==="조리 중"?"bg-navy-80 text-14-semibold tracking-[0em] text-white":"border-[#ECECEC] border bg-white text-14-semibold tracking-[0em] text-navy-30"}`,onClick:()=>c("조리 중"),children:["조리 중 ",T.length]}),e.jsxs("div",{className:`rounded-full px-3.5 py-1.75 cursor-pointer ${n==="조리 완료"?"bg-navy-80 text-14-semibold tracking-[0em] text-white":"border-[#ECECEC] border bg-white text-14-semibold tracking-[0em] text-navy-30"}`,onClick:()=>c("조리 완료"),children:["조리 완료 ",R.length]})]}),e.jsx("button",{type:"button","aria-label":"새로고침",onClick:se,disabled:b,"aria-busy":b,className:`absolute right-0 top-1/2 -translate-y-1/2 z-10\r
                 cursor-pointer [@media(max-width:431px)]:hidden`,children:e.jsx("img",{src:be,alt:"",className:`${b?"animate-[spin_0.6s_linear_1]":""}`})})]}),!N&&e.jsx(e.Fragment,{children:i==="전체"?e.jsxs("div",{className:"flex flex-row gap-2.5 flex-1 min-h-0 overflow-hidden w-full",children:[e.jsxs("div",{className:"flex flex-1 flex-col min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-row ml-1.5 gap-1.5 flex-shrink-0 mb-3.5",children:[e.jsx("div",{className:"text-title-20-bold text-[#363D4A]",children:"입금 대기"}),e.jsx("div",{className:"text-title-20-bold text-primary",children:$.length})]}),e.jsxs("div",{className:"flex flex-row border border-black-25 rounded-t-2xl pl-5 py-2.5 gap-2.5 bg-[#E7ECF0] flex-shrink-0",children:[e.jsx("div",{className:"flex text-14-medium leading-[136%] text-navy-35",children:"테이블"}),e.jsx("div",{className:"flex text-14-medium leading-[136%] text-navy-35",children:"입금 내역"})]}),e.jsxs("div",{ref:x,className:`flex flex-col gap-7.5 rounded-b-2xl border border-t-0 border-black-30 flex-1 bg-white px-5.5 py-4 min-h-0 relative ${l?"overflow-hidden":"overflow-y-auto"}`,children:[F?e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:e.jsx(M,{})}):$.length>0?$.map(t=>e.jsx(J,{orderId:t.id,tableNumber:t.tableId,timeText:W(t.createdAt),depositorName:t.depositorName,totalAmount:t.totalPrice||0,onClick:()=>z(t),onSuccess:k},t.id)):e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:e.jsx("div",{className:"text-16-medium text-black-60",children:I?"데이터를 불러오지 못했습니다.":"아직 입금 대기 중인 주문이 없어요!"})}),l&&e.jsx(O,{type:"payment",orderId:l.id,tableNumber:l.tableId,timeText:L(l.createdAt),depositorName:l.depositorName,totalAmount:l.totalPrice||0,menuDetails:l.menuDetails,onClose:_,onSuccess:k})]})]}),e.jsxs("div",{className:"flex flex-1 flex-col min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-row ml-1.5 gap-1.5 flex-shrink-0 mb-3.5",children:[e.jsx("div",{className:"text-title-20-bold text-[#363D4A]",children:"조리 중"}),e.jsx("div",{className:"text-title-20-bold text-primary",children:T.length})]}),e.jsxs("div",{className:"flex flex-row text-14-medium leading-[136%] text-navy-35 border border-black-30 rounded-t-2xl bg-[#E7ECF0] gap-2.5 py-2.5 pl-5",children:[e.jsx("div",{className:"flex",children:"테이블"}),e.jsx("div",{className:"flex w-38.5 md:w-32 lg:w-38.5 text-start",children:"메뉴"}),e.jsx("div",{className:"flex",children:"수량"})]}),e.jsxs("div",{className:`flex flex-col gap-7.5 rounded-b-2xl border border-t-0 border-black-30 flex-1 bg-white px-5.5 py-4 min-h-0 relative ${s?"overflow-hidden":"overflow-y-auto"}`,children:[F?e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:e.jsx(M,{})}):T.length>0?T.map(t=>e.jsx(Q,{orderId:t.id,tableNumber:t.tableId,menuDetails:t.menuDetails,onSuccess:k,onClick:()=>H(t)},t.id)):e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:e.jsx("div",{className:"text-16-medium text-black-60",children:I?"데이터를 불러오지 못했습니다.":"조리 중인 주문이 없어요!"})}),s&&e.jsx(O,{type:"cooking",orderId:s.id,tableNumber:s.tableId,timeText:L(s.createdAt),depositorName:s.depositorName,totalAmount:s.totalPrice||0,menuDetails:s.menuDetails,onClose:U,onSuccess:k})]})]})]}):e.jsx(we,{cookedOrders:R,isLoading:F,error:I,onRefresh:k,scrollContainerRef:D,savedScrollPosition:y,setSavedScrollPosition:h})}),N&&e.jsxs(e.Fragment,{children:[n==="입금 대기"&&e.jsxs("div",{className:"flex flex-col flex-1 min-h-0 overflow-hidden w-full",children:[e.jsxs("div",{className:"flex flex-row px-5 py-2.5 gap-2.5 bg-[#E7ECF0] rounded-t-2xl border-black-25 border flex-shrink-0",children:[e.jsx("div",{className:"flex text-14-medium leading-[136%] text-navy-35",children:"테이블"}),e.jsx("div",{className:"flex text-14-medium leading-[136%] text-navy-35",children:"입금 내역"})]}),e.jsxs("div",{ref:x,className:`flex flex-col px-5.5 py-4.25 gap-7.5 bg-white rounded-b-2xl border-t-0 border-black-25 border flex-1 min-h-0 relative ${l?"overflow-hidden":"overflow-y-auto"}`,children:[F?e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:e.jsx("div",{className:"text-16-medium text-black-60",children:"로딩 중..."})}):$.length>0?$.map(t=>e.jsx(J,{orderId:t.id,tableNumber:t.tableId,timeText:W(t.createdAt),depositorName:t.depositorName,totalAmount:t.totalPrice||0,onClick:()=>z(t),onSuccess:k},t.id)):e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:e.jsx("div",{className:"text-16-medium text-black-60",children:I?"데이터를 불러오지 못했습니다.":"아직 입금 대기 중인 주문이 없어요!"})}),l&&e.jsx(O,{type:"payment",orderId:l.id,tableNumber:l.tableId,timeText:L(l.createdAt),depositorName:l.depositorName,totalAmount:l.totalPrice||0,menuDetails:l.menuDetails,onClose:_,onSuccess:k})]})]}),n==="조리 중"&&e.jsxs("div",{className:"flex flex-col flex-1 min-h-0 overflow-hidden w-full",children:[e.jsxs("div",{className:"flex flex-row px-5 py-2.5 gap-2.5 bg-[#E7ECF0] rounded-t-2xl border-black-25 border flex-shrink-0 text-14-medium leading-[136%] text-navy-35",children:[e.jsx("div",{className:"flex",children:"테이블"}),e.jsx("div",{className:"flex w-38.5 max-[376px]:w-32 text-start",children:"메뉴"}),e.jsx("div",{className:"flex",children:"수량"})]}),e.jsxs("div",{className:`flex flex-col px-5.5 py-4 gap-7.5 bg-white rounded-b-2xl border-t-0 border-black-25 border flex-1 min-h-0 relative ${s?"overflow-hidden":"overflow-y-auto"}`,children:[F?e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:e.jsx(M,{})}):T.length>0?T.map(t=>e.jsx(Q,{orderId:t.id,tableNumber:t.tableId,menuDetails:t.menuDetails,onSuccess:k,onClick:()=>H(t)},t.id)):e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:e.jsx("div",{className:"text-16-medium text-black-60",children:I?"데이터를 불러오지 못했습니다.":"아직 조리 중인 주문이 없어요!"})}),s&&e.jsx(O,{type:"cooking",orderId:s.id,tableNumber:s.tableId,timeText:L(s.createdAt),depositorName:s.depositorName,totalAmount:s.totalPrice||0,menuDetails:s.menuDetails,onClose:U,onSuccess:k})]})]}),n==="조리 완료"&&e.jsxs("div",{className:"flex flex-col flex-1 min-h-0 overflow-hidden w-full",children:[e.jsxs("div",{className:"flex flex-row pl-5 py-2.5 gap-2.5 bg-[#E7ECF0] rounded-t-2xl border border-black-25 items-center text-14-medium leading-[136%] text-navy-35 flex-shrink-0",children:[e.jsx("div",{className:"flex",children:"테이블"}),e.jsx("div",{className:"flex max-[376px]:w-20 w-29",children:"금액"}),e.jsx("div",{className:"flex",children:"주문 시간"})]}),e.jsxs("div",{className:`flex flex-col bg-white rounded-b-2xl border-t-0 border-black-25 border flex-1 min-h-0 relative ${l&&n==="조리 완료"?"overflow-hidden":"overflow-y-auto"}`,children:[F?e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center px-5 py-4",children:e.jsx(M,{})}):R.length>0?R.map(t=>e.jsx(le,{orderId:t.id,tableNumber:t.tableId,depositorName:t.depositorName,menuDetails:t.menuDetails,totalAmount:t.totalPrice||0,createdAt:W(t.createdAt),onSuccess:k,onClick:()=>ie(t)},t.id)):e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center px-5 py-4",children:e.jsx("div",{className:"text-16-medium text-black-60",children:I?"데이터를 불러오지 못했습니다.":"조리 완료된 주문이 없어요!"})}),l&&n==="조리 완료"&&e.jsx(O,{type:"cooked",orderId:l.id,tableNumber:l.tableId,timeText:L(l.createdAt),depositorName:l.depositorName,totalAmount:l.totalPrice||0,menuDetails:l.menuDetails,onClose:_,onSuccess:k})]})]})]})]})};export{$e as default};
