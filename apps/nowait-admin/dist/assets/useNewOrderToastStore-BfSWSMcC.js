import{u as b}from"./useQuery-CCwnVFBg.js";import{A as p}from"./AdminApi-BnHrq_k2.js";import{R as u}from"./index-D0dnNxI7.js";const w=async t=>{try{const s=localStorage.getItem("accessToken"),e=await p.get(`/admin/orders/${t}`,{headers:{Authorization:`Bearer ${s}`}});return e.data&&e.data.success&&Array.isArray(e.data.response)?e.data.response:[]}catch(s){return console.error("주문 목록 조회 실패:",s),[]}},j=t=>b({queryKey:["orders",t],queryFn:()=>w(t),refetchInterval:1e3,refetchIntervalInBackground:!0,staleTime:0}),m=t=>{let s;const e=new Set,o=(a,l)=>{const c=typeof a=="function"?a(s):a;if(!Object.is(c,s)){const h=s;s=l??(typeof c!="object"||c===null)?c:Object.assign({},s,c),e.forEach(I=>I(s,h))}},r=()=>s,d={setState:o,getState:r,getInitialState:()=>y,subscribe:a=>(e.add(a),()=>e.delete(a))},y=s=t(o,r,d);return d},O=(t=>t?m(t):m),T=t=>t;function A(t,s=T){const e=u.useSyncExternalStore(t.subscribe,u.useCallback(()=>s(t.getState()),[t,s]),u.useCallback(()=>s(t.getInitialState()),[t,s]));return u.useDebugValue(e),e}const S=t=>{const s=O(t),e=o=>A(s,o);return Object.assign(e,s),e},v=(t=>t?S(t):S),g="toasts:dismissed",f=()=>{try{const t=localStorage.getItem(g);return t?new Set(JSON.parse(t)):new Set}catch{return new Set}},E=t=>{try{localStorage.setItem(g,JSON.stringify([...t]))}catch{}},q=v((t,s)=>({toasts:[],pushToast:e=>{if(!f().has(e.id)&&!s().toasts.some(r=>r.id===e.id)){t(r=>({toasts:[...r.toasts,e]}));try{const r=document.querySelector("#new-order-audio");r==null||r.play()}catch{}if(document.hidden){const r=document.title;document.title="● 신규 주문 - "+r,setTimeout(()=>document.title=r,4e3)}}},removeToast:e=>{t(r=>({toasts:r.toasts.filter(i=>i.id!==e)}));const o=f();o.has(e)||(o.add(e),E(o))},purgeNonWaiting:e=>{const o=new Set(e.filter(n=>n.status==="WAITING_FOR_PAYMENT").map(n=>n.id)),{toasts:r,removeToast:i}=s();r.forEach(n=>{o.has(n.orderId)||i(n.id)})}}));export{j as a,q as u};
